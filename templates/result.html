{% extends "base_celebratory.html" %}

{% block title %}Your Gift Awaits!{% endblock %}

{% block content %}
<div class="text-center">
    <div class="celebration-header mb-4">
        <div class="gift-icon mb-3">
            <i data-feather="gift" class="celebratory-icon"></i>
        </div>
        <h1 class="celebratory-title">üéâ CONGRATULATIONS! üéâ</h1>
        <p class="celebratory-subtitle">You've successfully completed the mystery challenge!</p>
    </div>
    
    <div class="gift-voucher-container mb-4">
        <div class="gift-voucher">
            <div class="voucher-header">
                <h2 class="voucher-title">
                    <i data-feather="star" class="me-2"></i>
                    SPECIAL GIFT VOUCHER
                    <i data-feather="star" class="ms-2"></i>
                </h2>
            </div>
            
            <div class="voucher-content">
                <div class="voucher-icon mb-3">
                    <i data-feather="award" class="voucher-main-icon"></i>
                </div>
                
                <h3 class="voucher-prize">üéÅ YOUR AMAZING PRIZE üéÅ</h3>
                
                <div class="voucher-details">
                    <p class="voucher-text">
                        This voucher entitles you to claim your special reward!
                    </p>
                    
                    <div class="voucher-code">
                        <strong>VOUCHER CODE: MYSTERY2025</strong>
                    </div>
                </div>
                
                <div class="voucher-footer">
                    <small>Valid until presented ‚Ä¢ Non-transferable</small>
                </div>
            </div>
        </div>
    </div>
    
    <div class="celebration-actions">
        <button class="btn celebratory-btn mb-3" onclick="shareResult()">
            <i data-feather="share-2" class="me-2"></i>
            Share Your Success
        </button>
        
        <div>
            <a href="{{ url_for('logout') }}" class="celebratory-link">
                <i data-feather="home" class="me-1"></i>
                Return to Vault
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
// Add celebration animations when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Trigger confetti animation
    createConfetti();
    
    // Add entrance animation to voucher
    setTimeout(() => {
        document.querySelector('.gift-voucher').classList.add('voucher-revealed');
    }, 500);
});

function shareResult() {
    if (navigator.share) {
        navigator.share({
            title: 'I completed the mystery challenge!',
            text: 'Just unlocked a special gift voucher from the mysterious vault!',
            url: window.location.href
        });
    } else {
        // Fallback for browsers that don't support Web Share API
        const url = window.location.href;
        const text = 'I completed the mystery challenge and won a gift voucher!';
        const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
        window.open(shareUrl, '_blank');
    }
}

function createConfetti() {
    const confettiContainer = document.querySelector('.confetti-container');
    const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7'];
    
    for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 3 + 's';
        confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
        confettiContainer.appendChild(confetti);
    }
}
</script>
{% endblock %}
